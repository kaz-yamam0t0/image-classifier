{"version":3,"file":"main.js","sources":["../src/js/util.ts","../src/js/preview.ts","../src/js/sources.ts","../src/js/config.ts","../src/js/main.ts"],"sourcesContent":["\nconst listen = function(name:string, callback) {\n\t(this || window).addEventListener(name, callback);\n};\n\n// debugger\nlet _debug = null;\nconst debug = (s:string)=>{\n\tif (_debug == null) {\n\t\t_debug = createElement(\"div\", {\"class\":\"debugger\"}, document.body);\n\t}\n\t_debug.innerHTML = s;\n};\n\n\n\nconst setAttrs = (el:any, attrs:any)=>{\n\tif (!attrs) {\n\t\treturn;\n\t}\n\tif (typeof attrs === \"string\") {\n\t\tattrs = { \"text\" : attrs };\n\t}\n\tif (attrs) {\n\t\tObject.keys(attrs).forEach((k)=>{\n\t\t\tconst v = attrs[k];\n\t\t\tif (typeof v === \"undefined\" || v === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// style\n\t\t\tif (k == \"style\" && (typeof v === \"object\")) {\n\t\t\t\tObject.keys(v).forEach(k_=>{\n\t\t\t\t\tel.style[k_] = v[k_];\n\t\t\t\t});\n\t\t\t} \n\t\t\t// class\n\t\t\telse if (k == \"class\") {\n\t\t\t\tif (Array.isArray(v)) {\n\t\t\t\t\tv.forEach(v_=>el.classList.add(v_));\n\t\t\t\t} else if (typeof v === \"object\") {\n\t\t\t\t\tObject.keys(v).forEach(k_=>{\n\t\t\t\t\t\tif (v[k_] == true) {\n\t\t\t\t\t\t\tel.classList.add(k_);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.classList.remove(k_);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tv.split(/\\s+/).forEach(v_=>{\n\t\t\t\t\t\tif (v_ = v_.trim()) el.classList.add(v_);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} \n\t\t\t// text\n\t\t\telse if (k === \"text\") {\n\t\t\t\tel.textContent = v;\n\t\t\t}\n\t\t\t// default\n\t\t\telse {\n\t\t\t\tel[k] = v\n\t\t\t}\n\t\t});\t\n\t}\n};\nconst setStyle = (el:any, styles:Object)=>{\n\tsetAttrs(el, { \"style\": styles });\n};\nconst createElement = (tagName:string, attrs:any, parentNode:any=null, callback:any=null)=>{\n\tconst el = document.createElement(tagName);\n\tif (attrs) setAttrs(el, attrs);\n\n\tif (parentNode) {\n\t\tparentNode.appendChild(el)\n\t}\n\tif (callback) {\n\t\tcallback(el);\n\t}\n\treturn el;\n};\n\nconst find = (q:string, el:any=null)=>{\n\treturn (el || document).querySelector(q);\n};\nconst findByClass = (q:string, el:any=null)=>{\n\tconst elements = (el || document).getElementsByClassName(q);\n\tif (elements.length > 0) return elements[0];\n\treturn null;\n};\n\n\nexport {\n\tlisten,\n\tdebug,\n\tcreateElement, \n\tsetAttrs,\n\tsetStyle, \n\n\tfind,\n\tfindByClass,\n}","\n\nimport { listen, debug, setStyle, createElement, findByClass } from './util';\n\nclass Preview {\n\tmode = 0; // 1=mousedown\n\n\t// event position\n\tstartX = 0;\n\tstartY = 0;\n\tpageX = 0;\n\tpageY = 0;\n\t\n\t// image position\n\t_imageStartX = 0;\n\t_imageStartY = 0;\n\timageX = 0;\n\timageY = 0;\n\n\t// frame position\n\tframeX = 0;\n\tframeY = 0;\n\tframeWidth = 0;\n\tframeHeight = 0;\n\n\t// zoom\n\tzoom = 1;\n\n\t// image data\n\timageUrl: string;\n\timage = null; // Image\n\n\t// elements\n\tel = null; // div.preview\n\tbg = null; // <img>\n\tframe = null; // <div>\n\tframeImage = null; // <img>\n\n\t// event callbacks\n\t__mousedown = null;\n\t__mousemove = null;\n\t__mouseup = null;\n\n\tconstructor(image_data) {\n\t\tthis.imageUrl = image_data.path;\n\t\tthis.reset();\n\t}\n\treset() {\n\t\tthis.mode = 0;\n\t\tthis.startX = this.startY = 0;\n\t\tthis.pageX = this.pageY = 0;\n\t\tthis.imageX = this.imageY = 0;\n\t\tthis._imageStartX = this._imageStartY = 0;\n\n\t\tthis.zoom = 1;\n\n\t\tthis.image = null;\n\t\tthis.el = null;\n\t}\n\tfree() {\n\t\tif (this.frameImage) this.frameImage.remove();\n\t\tif (this.frame) this.frame.remove();\n\t\tif (this.bg) this.bg.remove();\n\n\t\tif (this.__mousedown) this.el.removeEventListener(\"mousedown\", this.__mousedown);\n\t\tif (this.__mousemove) this.el.removeEventListener(\"mousemove\", this.__mousemove);\n\t\tif (this.__mouseup) this.el.removeEventListener(\"mouseup\", this.__mouseup);\n\n\t\tthis.__mousedown = null;\n\t\tthis.__mousemove = null;\n\t\tthis.__mouseup = null;\n\n\t\tthis.el = null;\n\t\tthis.image = null;\n\t\tthis.bg = null;\n\t}\n\n\tmount() {\n\t\tif (!(this.el = findByClass(\"preview\"))) {\n\t\t\tthrow 'preview not found.';\t\t\t\n\t\t}\n\t\tthis.image = new Image();\n\t\tthis.image.src = this.imageUrl;\n\n\t\tif (this.image.complete) {\n\t\t\tthis.onload();\n\t\t} else {\n\t\t\tconst self = this;\n\t\t\tthis.image.onload = ()=>{\n\t\t\t\tself.onload();\n\t\t\t};\n\t\t\tthis.image.onerror = (err)=>{\n\n\t\t\t};\n\t\t}\n\t}\n\tonload() {\n\t\tthis.bg = createElement(\"img\", {\n\t\t\t\"src\" : this.imageUrl,\n\t\t\t\"class\" : \"bg\",\n\t\t}, this.el);\n\n\t\tthis.frame = createElement(\"div\", {\"class\": \"frame\"}, this.el);\n\n\t\tthis.frameImage = createElement(\"img\", {\n\t\t\t\"src\" : this.imageUrl,\n\t\t}, this.frame);\n\n\t\t// calculate ratio\n\t\tlet w0 = this.el.clientWidth, \n\t\t\th0 = this.el.clientHeight, \n\t\t\tw = this.image.width, \n\t\t\th = this.image.height;\n\t\t\n\t\tlet r = 1;\n\t\tif (w > w0) {\n\t\t\tr = Math.min(r, w0 / w);\n\t\t\tw *= r; h *= r;\n\t\t}\n\t\tif (h > h0) {\n\t\t\tr = Math.min(r, h0 / h);\n\t\t\tw *= r; h *= r;\n\t\t}\n\n\t\t// initialize image size and position\n\t\tthis.zoom = r;\n\t\tthis.imageX = (w0 - this.image.width * r) / 2;\n\t\tthis.imageY = (h0 - this.image.height * r) / 2;\n\t\t\n\t\t// calculate frame position\n\t\tthis.frameWidth = this.image.width; // * r;\n\t\tthis.frameHeight = this.image.height; // * r;\n\t\tthis.frameX = this.imageX;\n\t\tthis.frameY = this.imageY;\n\n\t\t// update \n\t\tthis.update();\n\n\t\t// init events\n\t\tthis.initEvents();\n\t}\n\tupdate() {\n\t\tif (this.bg) {\n\t\t\tsetStyle(this.bg, {\n\t\t\t\t\"left\" : `${this.imageX}px`,\n\t\t\t\t\"top\" : `${this.imageY}px`,\n\t\t\t\t\"width\" : `${this.image.width * this.zoom}px`,\n\t\t\t\t\"height\" : `${this.image.height * this.zoom}px`,\n\t\t\t});\n\t\t}\n\t\tif (this.frame) {\n\t\t\tsetStyle(this.frame, {\n\t\t\t\t\"left\" : `${this.frameX}px`,\n\t\t\t\t\"top\" : `${this.frameY}px`,\n\t\t\t\t\"width\" : `${this.image.width * this.zoom}px`,\n\t\t\t\t\"height\" : `${this.image.height * this.zoom}px`,\n\t\t\t});\n\t\t}\n\t\tif (this.bg && this.frame && this.frameImage) {\n\t\t\tconst x = this.imageX - this.frameX;\n\t\t\tconst y = this.imageY - this.frameY;\n\n\t\t\tsetStyle(this.frameImage, {\n\t\t\t\t\"left\" : `${x}px`,\n\t\t\t\t\"top\" : `${y}px`,\n\t\t\t\t\"width\" : `${this.image.width * this.zoom}px`,\n\t\t\t\t\"height\" : `${this.image.height * this.zoom}px`,\n\t\t\t});\n\t\t}\n\t}\n\n\t// event\n\tinitEvents() {\n\t\tconst self = this;\n\t\tthis.__mousedown = (e)=>{\n\t\t\tself.mousedown(e);\n\t\t\treturn false;\n\t\t};\n\t\tthis.__mousemove = (e)=>{\n\t\t\tself.mousemove(e);\n\t\t\treturn false;\n\t\t};\n\t\tthis.__mouseup = (e)=>{\n\t\t\tself.mouseup(e);\n\t\t\treturn false;\n\t\t};\n\n\t\tlisten.call(this.el, \"mousedown\", this.__mousedown);\n\t\tlisten.call(this.el, \"mousemove\", this.__mousemove);\n\t\tlisten.call(this.el, \"mouseup\", this.__mouseup);\t\n\t}\n\tmousedown(e) {\n\t\tthis.mode = 1;\n\t\tthis.pageX = this.startX = e.pageX;\n\t\tthis.pageY = this.startY = e.pageY;\n\t\t[this._imageStartX, this._imageStartY] = [this.imageX, this.imageY];\n\t\tthis.update();\n\t\tthis._debug();\n\t}\n\tmousemove(e) {\n\t\tif (this.mode != 1) return;\n\n\t\t[this.pageX, this.pageY] = [e.pageX, e.pageY];\n\t\tthis.imageX = this._imageStartX + (this.pageX - this.startX);\n\t\tthis.imageY = this._imageStartY + (this.pageY - this.startY);\n\t\tthis.update();\n\t\tthis._debug();\n\t}\n\tmouseup(e) {\n\t\tthis.mode = 0;\n\t\tthis.pageX = this.startX = 0;\n\t\tthis.pageY = this.startY = 0;\n\t\tthis._imageStartX = this._imageStartY = 0;\n\t}\n\n\t_debug() {\n\t\tdebug(`\n\t\t\tmode: ${this.mode}<br />\n\t\t\tstart: (${this.startX}, ${this.startY})<br />\n\t\t\tpageX/Y: (${this.pageX}, ${this.pageY})<br />\n\t\t\timage: (${this.imageX}, ${this.imageX})<br />\n\t\t\tzoom: ${this.zoom}\n\t\t`);\n\t}\n}\nexport default Preview;\n","import { listen, debug, setStyle, createElement, findByClass } from './util';\nimport { DATA_DIR } from './config';\n\nclass Sources {\n\titems: {\n\t\tname: string, \n\t\tpath: string, \n\t\ttag: string,\n\t\tdone: boolean,\n\t\tremoved: boolean,\n\n\t\t$li: any, // <li>\n\t\t$image: any, // <img>\n\t}[];\n\n\tel = null; // div.sources\n\tul = null; // <ul>\n\n\tcurrent:number = 0; // item of this.items \n\tmounted:boolean = false;\n\tonchange = null;\n\n\tconstructor(items: any[]) {\n\t\tconst self = this;\n\n\t\tthis.items = [];\n\t\tthis.add(items);\n\t}\n\tadd(items: any[]) {\n\t\tconst self = this;\n\n\t\titems.forEach((item)=>{\n\t\t\tif (typeof item === \"string\") {\n\t\t\t\titem = { \n\t\t\t\t\tname: item,  \n\t\t\t\t\tpath: `${DATA_DIR}/${item}`,\n\t\t\t\t\ttag: null,\n\t\t\t\t\tdone: false,\n\t\t\t\t\tremoved: false,\n\t\t\t\t};\n\t\t\t\titem.$image = new Image();\n\t\t\t\titem.$image.src = item.path;\n\t\t\t}\n\t\t\tself.items.push(item);\n\t\t});\n\n\t\tif (this.mounted) {\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tmount() {\n\t\tif (!(this.el = findByClass(\"sources\"))) {\n\t\t\tthrow '`.sources` not found.';\t\t\t\n\t\t}\n\t\tif (!(this.ul = this.el.querySelector(\"ul\"))) {\n\t\t\t// throw '`.sources > ul` not found.';\t\n\t\t\tthis.ul = createElement(\"ul\", null, this.el);\n\t\t}\n\n\t\tthis.mounted = true;\n\n\t\tthis.update();\n\t\tthis.initEvents();\n\n\t\tthis.change();\n\t}\n\tupdate() {\n\t\tconst self = this;\n\t\tthis.items.forEach((item, index)=>{\n\t\t\t// $li\n\t\t\tlet $li = item.$li = item.$li || createElement(\"li\",null, self.ul);\n\t\t\t//$li.setAttribute(\"title\", item.path);\n\n\t\t\t// $item\n\t\t\tlet $item = findByClass(\"item\", $li) || createElement(\"div\", { \"class\":\"item\" }, $li);\n\t\t\tlet $image = findByClass(\"image\", $item) || createElement(\"div\", {\"class\":\"image\"}, $item, (el)=>{\n\t\t\t\tel.appendChild(item.$image);\n\t\t\t});\n\t\t\tlet $name = findByClass(\"name\", $item) || createElement(\"div\", {\"class\":\"name\"}, $item);\n\t\t\t\n\t\t\t$name.textContent = item.name;\n\n\t\t\tif (self.current == index) {\n\t\t\t\t$item.classList.add(\"-active\");\n\t\t\t} else {\n\t\t\t\t$item.classList.remove(\"-active\");\n\t\t\t}\n\n\t\t\t// click\n\t\t\t//listen.call($li, \"click\", function(e) {\n\t\t\t//\tself.click(e);\n\t\t\t//});\n\n\t\t\t// status\n\t\t\tif (item.done) {\n\t\t\t\t$li.classList.add(\"-ok\");\n\t\t\t\t$li.classList.remove(\"-removed\");\n\t\t\t} else if (item.removed) {\n\t\t\t\t$li.classList.remove(\"-ok\");\n\t\t\t\t$li.classList.add(\"-removed\");\n\t\t\t} else {\n\t\t\t\t$li.classList.remove(\"-ok\");\n\t\t\t\t$li.classList.remove(\"-removed\");\n\t\t\t}\n\t\t\t/*\n\t\t\tlet $tag = findByClass(\"tag\", $li);\n\t\t\tif (item.done) {\n\t\t\t\tif (!$tag) {\n\t\t\t\t\t$tag = createElement(\"div\", {\"class\":\"tag -ok\"}, $li);\n\t\t\t\t} else {\n\t\t\t\t\t$tag.className = \"tag -ok\";\n\t\t\t\t}\n\t\t\t\t$tag.textContent = item.tag || \"done\";\n\t\t\t} else if (item.removed) {\n\t\t\t\tif (! $tag) {\n\t\t\t\t\t$tag = createElement(\"div\", {\"class\":\"tag -removed\"}, $li);\n\t\t\t\t} else {\n\t\t\t\t\t$tag.className = \"tag -removed\";\n\t\t\t\t}\n\t\t\t\t$tag.textContent = item.tag || \"removed\";\n\t\t\t} else {\n\t\t\t\tif ($tag) {\n\t\t\t\t\t$tag.remove();\n\t\t\t\t}\n\t\t\t} */\n\t\t});\n\t\t/*\n\t\t\t<div class=\"sources\">\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<div class=\"name -active\">feed0000.jpg</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class=\"name\">feed0001.jpg</div>\n\t\t\t\t<div class=\"tag tag-ok\">OK</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class=\"name\">feed0002.jpg</div>\n\t\t\t\t<div class=\"tag tag-removed\">NG</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t*/\n\t}\n\t// event\n\tinitEvents() {\n\t\tconst self = this;\n\n\t\tlisten.call(document.body, \"keydown\", (e)=>{\n\t\t\tconst keycode = e.keyCode;\n\t\t\tconst keyname = `${e.key}`.toLowerCase();\n\t\n\t\t\tif ( (keycode == 40 || keyname == 'arrowdown') || \n\t\t\t\t(keycode == 38 || keyname == 'arrowup')) \n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tself.keypress(e);\n\t\t\treturn false;\n\t\t});\n\t\tlisten.call(this.ul, \"click\", function(e){\n\t\t\tself.click(e);\n\t\t})\n\t}\n\tkeypress(e) {\n\t\tconst keycode = e.keyCode;\n\t\tconst keyname = `${e.key}`.toLowerCase();\n\t\t//console.log(keycode, keyname);\n\t\t\n\t\t// down\n\t\tif (keycode == 40 || keyname == 'arrowdown') {\n\t\t\tthis.moveToDown();\n\t\t}\n\t\t// up\n\t\tif (keycode == 38 || keyname == 'arrowup') {\n\t\t\tthis.moveToUp();\n\t\t}\n\t\t// delete\n\t\tif (keycode == 8 || keyname == \"backspace\") {\n\t\t\tthis.remove();\n\t\t}\n\t\t// enter\n\t\tif (keycode == 13 || keyname == 'enter') {\n\t\t\tthis.approve();\n\t\t}\n\t}\n\tclick(e) {\n\t\t// console.log(e);\n\t\tif (! e.path) {\n\t\t\treturn;\n\t\t}\n\t\tconst li = e.path.find(el_=>{\n\t\t\tif (el_.nodeType != Node.ELEMENT_NODE) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn (`${el_.nodeName}`.toLowerCase() == \"li\");\n\t\t});\n\t\t\n\t\tconst index = this.items.findIndex((item)=>{\n\t\t\treturn (item.$li == li);\n\t\t});\n\t\tif (index >= 0) {\n\t\t\tthis.current = index;\n\t\t}\n\n\t\tthis.update();\n\t\tthis.change();\n\t\t//this.scroll();\n\t}\n\tremove() {\n\t\tif (typeof this.items[this.current] !== \"undefined\") {\n\t\t\tthis.items[this.current].done = false;\n\t\t\tthis.items[this.current].removed = true;\n\t\t}\n\t\tthis.update();\n\t\tthis.moveToDown();\n\t}\n\tapprove() {\n\t\tif (typeof this.items[this.current] !== \"undefined\") {\n\t\t\tthis.items[this.current].done = true;\n\t\t\tthis.items[this.current].removed = false;\n\t\t}\n\t\tthis.update();\n\t\tthis.moveToDown();\n\t}\n\tmoveToUp() {\n\t\tif (this.items.length <= 0) {\n\t\t\tthis.current = 0;\n\t\t} else {\n\t\t\t//this.current = (this.current + this.items.length - 1) % this.items.length;\n\t\t\tif (this.current > 0) this.current--;\n\t\t}\n\t\tthis.update();\n\t\tthis.change();\n\t\tthis.scroll();\n\t}\n\tmoveToDown() {\n\t\tif (this.items.length <= 0) {\n\t\t\tthis.current = 0;\n\t\t} else {\n\t\t\t// this.current = (this.current + 1) % this.items.length;\n\t\t\tif (this.current < this.items.length - 1) this.current++;\n\t\t}\n\t\tthis.update();\n\t\tthis.change();\n\t\tthis.scroll();\n\t}\n\tscroll() {\n\t\t//this.el;\n\t\tif (typeof this.items[this.current] !== \"undefined\") {\n\t\t\tlet scrollTop = this.el.scrollTop;\n\t\t\tconst height0 = this.el.clientHeight;\n\t\t\tconst innerHeight = this.el.querySelector(\"ul\").clientHeight;\n\t\t\tif (height0 - 24 > innerHeight) {\n\t\t\t\t//return;\n\t\t\t}\n\n\t\t\tconst current = this.items[this.current];\n\t\t\tconst rect = current.$li.getBoundingClientRect();\n\t\t\tconst top = rect.top;\n\t\t\tconst height = rect.height;\n\n\t\t\tconst top_ = (scrollTop + top) - (height0 - height)/2; // top should be\n\n\t\t\t//if (Math.abs(top - top_) > 24) {\n\t\t\t\tthis.el.scrollTo(0, top_);\n\t\t\t//}\n\t\t}\n\t}\n\n\tchange() {\n\t\tif (typeof this.items[this.current] !== \"undefined\") {\n\t\t\tif (this.onchange) {\n\t\t\t\tthis.onchange.call(this, this.items[this.current]);\n\t\t\t}\n\t\t}\n\t}\n\n}\nexport default Sources;\n","\nconst DATA_DIR = 'data';\nexport {\n\tDATA_DIR,\n};","\n\nimport Preview from './preview';\nimport Sources from './sources';\nimport { listen, debug, setStyle } from './util';\n\n// reset \nconst __return_false = ()=>false;\nlisten(\"wheel\", __return_false);\n//listen(\"click\", __return_false);\n//listen(\"mousedown\", __return_false);\n//listen(\"mousemove\", __return_false);\n//listen(\"mouseup\", __return_false);\n\n// preview\n/*\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n\tpreview.init();\n});\n*/\n\nlet preview = null;\n\nconst s = new Sources([\n\t\"seed0000.jpg\",\n\t\"seed0001.jpg\",\n\t\"seed0002.jpg\",\n\t\"seed0003.jpg\",\n\t\"seed0004.jpg\",\n\t\"seed0005.jpg\",\n\t\"seed0006.jpg\",\n\t\"seed0007.jpg\",\n\t\"seed0009.jpg\",\n\t\"seed0012.jpg\",\n\t\"seed0014.jpg\",\n]);\ns.add([\n\t\"seed0000.jpg\",\n\t\"seed0001.jpg\",\n\t\"seed0002.jpg\",\n\t\"seed0003.jpg\",\n\t\"seed0004.jpg\",\n\t\"seed0005.jpg\",\n\t\"seed0006.jpg\",\n\t\"seed0007.jpg\",\n\t\"seed0009.jpg\",\n\t\"seed0012.jpg\",\n\t\"seed0014.jpg\",\n]);\ns.onchange = function(item) {\n\t// remount preview\n\tif (preview) {\n\t\tpreview.free();\n\t\tpreview = null;\n\t}\n\tpreview = new Preview(item);\n\tpreview.mount();\n};\ns.mount();\n\n"],"names":["listen","name","callback","this","window","addEventListener","_debug","setAttrs","el","attrs","text","Object","keys","forEach","k","v","k_","style","Array","isArray","v_","classList","add","remove","split","trim","textContent","setStyle","styles","createElement","tagName","parentNode","document","appendChild","findByClass","q","elements","getElementsByClassName","length","image_data","imageUrl","path","reset","Preview","mode","startX","startY","pageX","pageY","imageX","imageY","_imageStartX","_imageStartY","zoom","image","frameImage","frame","bg","__mousedown","removeEventListener","__mousemove","__mouseup","Image","src","complete","onload","self_1","onerror","err","class","w0","clientWidth","h0","clientHeight","w","width","h","height","r","Math","min","frameWidth","frameHeight","frameX","frameY","update","initEvents","left","top","x","y","self","e","mousedown","mousemove","mouseup","call","_a","s","body","innerHTML","debug","items","Sources","item","tag","done","removed","$image","push","mounted","ul","querySelector","change","index","$li","$item","current","keycode","keyCode","keyname","key","toLowerCase","preventDefault","stopPropagation","keypress","click","moveToDown","moveToUp","approve","li","find","el_","nodeType","Node","ELEMENT_NODE","nodeName","findIndex","scroll","scrollTop","height0","rect","getBoundingClientRect","top_","scrollTo","onchange","preview","free","mount"],"mappings":"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"}